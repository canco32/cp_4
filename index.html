<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Drag and Drop Network App</title>
  <script src="https://cdn.jsdelivr.net/npm/alpinejs@3.12.0/dist/cdn.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/interact.js/1.10.11/interact.min.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="style.css">
</head>
<body class="bg-gray-100 flex items-center justify-center min-h-screen">
  <div class="bg-white shadow-lg p-5 rounded-lg w-full">
    <h1 class="text-2xl font-bold mb-5">Network Design Tool</h1>

    <div class="flex space-x-4 mb-5">
      <button id="add-router" class="px-4 py-2 bg-blue-500 text-white rounded shadow">Add Router</button>
      <button id="add-workstation" class="px-4 py-2 bg-green-500 text-white rounded shadow">Add Workstation</button>
      <button id="add-wire" class="px-4 py-2 bg-gray-500 text-white rounded shadow">Add Wire</button>
      <button id="randomize" class="px-4 py-2 bg-purple-500 text-white rounded shadow">Randomize</button>
      <button id="transfer-data" class="px-4 py-2 bg-blue-500 text-white rounded shadow">Transfer data</button>
      <button id="remove-wire" class="px-4 py-2 bg-red-500 text-white rounded shadow">Remove Wire</button>
      <button id="remove-object" class="px-4 py-2 bg-red-500 text-white rounded shadow">Remove object</button>
      <button id="download-config" class="px-4 py-2 bg-blue-500 text-white rounded shadow">Download Configuration</button>
      <div id="upload-config">
        
      </div>
    </div>

    <div id="canvas-container" class="relative bg-white border border-gray-400 rounded overflow-hidden" style="width: 100%; height: 1400px;">
      <div id="canvas" class="absolute top-0 left-0 w-full h-full">
      </div>
    </div>
    <div id="table" class="bg-white mt-4"></div>
  </div>

  <script type="module" src="model/index.js"></script>


<script>

// class PacketTransfer {
//     constructor(networkConfig) {
//         this.networkConfig = networkConfig; // –°–æ–¥–µ—Ä–∂–∏—Ç –æ–±—ä–µ–∫—Ç—ã –∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –∏–∑ JSON
//         this.graph = this.buildGraph();
//         this.highlightedElements = new Set(); // –•—Ä–∞–Ω–∏—Ç –ø–æ–¥—Å–≤–µ—á–µ–Ω–Ω—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
//         this.packets = []; // –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö –ø–∞–∫–µ—Ç–æ–≤
//     }

//     // –°—Ç—Ä–æ–∏–º –≥—Ä–∞—Ñ –∏–∑ –¥–∞–Ω–Ω—ã—Ö JSON
//     buildGraph() {
//         const graph = {};

//         // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—ä–µ–∫—Ç—ã –≤ –≥—Ä–∞—Ñ
//         this.networkConfig.objects.forEach(obj => {
//             graph[obj.id] = { 
//                 neighbors: [],
//                 objectStatus: obj.objectStatus
//             };
//         });

//         // –î–æ–±–∞–≤–ª—è–µ–º —Å–≤—è–∑–∏ (–ø—Ä–æ–≤–æ–¥–∞) –≤ –≥—Ä–∞—Ñ
//         this.networkConfig.wires.forEach(wire => {
//             const startNode = wire.startId;
//             const endNode = wire.endId;
//             const weight = parseFloat(wire.weight);
//             const transmissionType = wire.transmissionType;
//             const objectStatus = wire.objectStatus;

//             // –î–æ–±–∞–≤–ª—è–µ–º –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –≤ –≥—Ä–∞—Ñ (–µ—Å–ª–∏ –æ–Ω–æ –∞–∫—Ç–∏–≤–Ω–æ)
//             if (objectStatus === 'on') {
//                 graph[startNode].neighbors.push({ id: endNode, weight, transmissionType, objectStatus });
//                 graph[endNode].neighbors.push({ id: startNode, weight, transmissionType, objectStatus });
//             }
//         });

//         return graph;
//     }

//     // –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º –î–µ–π–∫—Å—Ç—Ä–∞ –¥–ª—è –ø–æ–∏—Å–∫–∞ –∫—Ä–∞—Ç—á–∞–π—à–µ–≥–æ –ø—É—Ç–∏ –∫ –∫–∞–∂–¥–æ–º—É —É–∑–ª—É
//     dijkstraAll(startId) {
//         const distances = {};
//         const previousNodes = {};
//         const unvisitedNodes = new Set(Object.keys(this.graph));

//         // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
//         unvisitedNodes.forEach(node => {
//             distances[node] = node === startId ? 0 : Infinity;
//             previousNodes[node] = null;
//         });

//         while (unvisitedNodes.size > 0) {
//             // –ù–∞–π–¥–µ–º —É–∑–µ–ª —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º
//             let currentNode = null;
//             unvisitedNodes.forEach(node => {
//                 if (currentNode === null || distances[node] < distances[currentNode]) {
//                     currentNode = node;
//                 }
//             });

//             if (distances[currentNode] === Infinity) break; // –ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å, –ø—É—Ç—å –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º

//             // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å–µ–¥–µ–π —Ç–µ–∫—É—â–µ–≥–æ —É–∑–ª–∞
//             this.graph[currentNode].neighbors.forEach(neighbor => {
//                 if (unvisitedNodes.has(neighbor.id) && this.graph[neighbor.id].objectStatus === 'on') {
//                     const alt = distances[currentNode] + neighbor.weight;
//                     if (alt < distances[neighbor.id]) {
//                         distances[neighbor.id] = alt;
//                         previousNodes[neighbor.id] = currentNode;
//                     }
//                 }
//             });

//             // –£–±–∏—Ä–∞–µ–º —Ç–µ–∫—É—â–∏–π —É–∑–µ–ª –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –Ω–µ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö
//             unvisitedNodes.delete(currentNode);
//         }

//         // –°–æ—Å—Ç–∞–≤–ª—è–µ–º —Ç–∞–±–ª–∏—Ü—ã —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–π –∏ –º–∞—Ä—à—Ä—É—Ç–æ–≤
//         const routes = {};
//         Object.keys(this.graph).forEach(node => {
//             const path = [];
//             let currentNode = node;
//             while (previousNodes[currentNode]) {
//                 path.unshift(currentNode);
//                 currentNode = previousNodes[currentNode];
//             }
//             if (distances[node] !== Infinity && node !== startId) {
//                 path.unshift(startId);
//             }
//             routes[node] = { distance: distances[node], path: path.length > 1 ? path : null };
//         });

//         return routes;
//     }

//     displayWorkstationRoutingTable(startId) {
//         const tableDiv = document.getElementById('table');
//         tableDiv.innerHTML = ''; // –û—á–∏—Å—Ç–∏—Ç—å –ø–µ—Ä–µ–¥ –¥–æ–±–∞–≤–ª–µ–Ω–∏–µ–º –Ω–æ–≤–æ–π —Ç–∞–±–ª–∏—Ü—ã

//         const routes = this.dijkstraAll(startId);

//         const table = document.createElement('table');
//         table.classList.add('table', 'border', 'border-collapse', 'w-full');

//         const headerRow = document.createElement('tr');
//         headerRow.innerHTML = `
//             <th class="border px-4 py-2">Target Workstation</th>
//             <th class="border px-4 py-2">Distance</th>
//             <th class="border px-4 py-2">Path</th>
//         `;
//         table.appendChild(headerRow);

//         Object.entries(routes).forEach(([target, data]) => {
//             // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Ä–∞–±–æ—á–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ (id –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å 'workstation-')
//             if (target.startsWith('workstation-') && target !== startId) {
//                 const row = document.createElement('tr');
//                 row.innerHTML = `
//                     <td class="border px-4 py-2">${target}</td>
//                     <td class="border px-4 py-2">${data.distance === Infinity ? 'Unreachable' : data.distance}</td>
//                     <td class="border px-4 py-2">${data.path ? data.path.join(' -> ') : 'N/A'}</td>
//                 `;
//                 table.appendChild(row);
//             }
//         });

//         tableDiv.appendChild(table);
//     }

//     dijkstra(startId, endId) {
//         const distances = {};
//         const previousNodes = {};
//         const unvisitedNodes = new Set(Object.keys(this.graph));

//         // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏—è
//         unvisitedNodes.forEach(node => {
//             distances[node] = node === startId ? 0 : Infinity;
//             previousNodes[node] = null;
//         });

//         while (unvisitedNodes.size > 0) {
//             // –ù–∞–π–¥–µ–º —É–∑–µ–ª —Å –º–∏–Ω–∏–º–∞–ª—å–Ω—ã–º —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ–º
//             let currentNode = null;
//             unvisitedNodes.forEach(node => {
//                 if (currentNode === null || distances[node] < distances[currentNode]) {
//                     currentNode = node;
//                 }
//             });

//             if (distances[currentNode] === Infinity) break; // –ï—Å–ª–∏ —Ä–∞—Å—Å—Ç–æ—è–Ω–∏–µ –±–µ—Å–∫–æ–Ω–µ—á–Ω–æ—Å—Ç—å, –ø—É—Ç—å –Ω–µ–¥–æ—Å—Ç–∏–∂–∏–º

//             // –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å–æ—Å–µ–¥–µ–π —Ç–µ–∫—É—â–µ–≥–æ —É–∑–ª–∞
//             this.graph[currentNode].neighbors.forEach(neighbor => {
//                 if (unvisitedNodes.has(neighbor.id) && this.graph[neighbor.id].objectStatus === 'on') {
//                     const alt = distances[currentNode] + neighbor.weight;
//                     if (alt < distances[neighbor.id]) {
//                         distances[neighbor.id] = alt;
//                         previousNodes[neighbor.id] = currentNode;
//                     }
//                 }
//             });

//             // –£–±–∏—Ä–∞–µ–º —Ç–µ–∫—É—â–∏–π —É–∑–µ–ª –∏–∑ –º–Ω–æ–∂–µ—Å—Ç–≤–∞ –Ω–µ –ø–æ—Å–µ—â–µ–Ω–Ω—ã—Ö
//             unvisitedNodes.delete(currentNode);
//         }

//         // –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏–º –ø—É—Ç—å
//         const path = [];
//         let currentNode = endId;
//         while (previousNodes[currentNode]) {
//             path.unshift(currentNode);
//             currentNode = previousNodes[currentNode];
//         }

//         if (distances[endId] === Infinity) {
//             return null; // –ü—É—Ç—å –Ω–µ –Ω–∞–π–¥–µ–Ω
//         }

//         path.unshift(startId); // –î–æ–±–∞–≤–ª—è–µ–º –Ω–∞—á–∞–ª—å–Ω—É—é —Å—Ç–∞–Ω—Ü–∏—é
//         return path;
//     }

//     // –ü–æ–¥—Å–≤–µ—á–∏–≤–∞–µ—Ç —ç–ª–µ–º–µ–Ω—Ç—ã –Ω–∞ –ø—É—Ç–∏
//     highlightPath(path) {
//         this.clearHighlights();

//         path.forEach((stationId, index) => {
//             const element = document.querySelector(`[data-id="${stationId}"]`);
//             if (element) {
//                 element.classList.add('highlight');
//                 this.highlightedElements.add(element);
//             }

//             if (index < path.length - 1) {
//                 const nextStationId = path[index + 1];
//                 const cable = this.networkConfig.wires.find(wire => 
//                     (wire.startId === stationId && wire.endId === nextStationId && wire.objectStatus === 'on') ||
//                     (wire.startId === nextStationId && wire.endId === stationId && wire.objectStatus === 'on')
//                 );
//                 if (cable) {
//                     const cableElement = document.querySelector(`[data-id="${cable.id}"]`);
//                     if (cableElement) {
//                         cableElement.classList.add('highlight');
//                         this.highlightedElements.add(cableElement);
//                     }
//                 }
//             }
//         });
//     }

//     // –°–Ω–∏–º–∞–µ—Ç –ø–æ–¥—Å–≤–µ—Ç–∫—É —Å–æ –≤—Å–µ—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤
//     clearHighlights() {
//         document.querySelectorAll('.highlight').forEach(element => {
//             element.classList.remove('highlight');
//         });
//         this.highlightedElements.clear();
//     }

//     getPathDetails(path) {
//         const details = [];

//         path.forEach((stationId, index) => {
//             if (index < path.length - 1) {
//                 const nextStationId = path[index + 1];
//                 // –ò—â–µ–º –∫–∞–±–µ–ª—å, —Å–æ–µ–¥–∏–Ω—è—é—â–∏–π —Ç–µ–∫—É—â—É—é —Å—Ç–∞–Ω—Ü–∏—é –∏ —Å–ª–µ–¥—É—é—â—É—é
//                 const cable = this.networkConfig.wires.find(wire => 
//                     (wire.startId === stationId && wire.endId === nextStationId && wire.objectStatus === 'on') ||
//                     (wire.startId === nextStationId && wire.endId === stationId && wire.objectStatus === 'on')
//                 );

//                 if (cable) {
//                     // –î–æ–±–∞–≤–ª—è–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –∫–∞–±–µ–ª–µ –≤ –¥–µ—Ç–∞–ª–∏
//                     details.push({
//                         id: cable.id,
//                         startId: cable.startId,
//                         endId: cable.endId,
//                         cableType: cable.cableType,
//                         transmissionType: cable.transmissionType,
//                         weight: cable.weight,
//                         objectStatus: cable.objectStatus
//                     });
//                 }
//             }
//         });

//         return {
//             path, // –ú–∞—Å—Å–∏–≤ —Å –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å—é —É–∑–ª–æ–≤
//             details // –ú–∞—Å—Å–∏–≤ —Å –¥–µ—Ç–∞–ª—è–º–∏ –∫–∞–±–µ–ª–µ–π
//         };
//     }

//     calculateTransmissionDetails(pathDetails) {
//         let totalTransmissionTime = 0;
//         let lossProbability = 0;

//         pathDetails.details.forEach(connection => {
//             let connectionTime = parseFloat(connection.weight);

//             // –£—á–∏—Ç—ã–≤–∞–µ–º —Ç–∏–ø –∫–∞–±–µ–ª—è
//             if (connection.cableType === "satellite") {
//                 connectionTime += 20; // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –¥–ª—è —Å–ø—É—Ç–Ω–∏–∫–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞
//                 lossProbability += 0.05; // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –ø–æ—Ç–µ—Ä–∏ –¥–ª—è —Å–ø—É—Ç–Ω–∏–∫–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞
//             } else {
//                 // –û–±—ã—á–Ω—ã–π –∫–∞–±–µ–ª—å
//                 lossProbability += 0.03;
//             }

//             // –£—á–∏—Ç—ã–≤–∞–µ–º —Ç–∏–ø –ø–µ—Ä–µ–¥–∞—á–∏
//             if (connection.transmissionType === "halfduplex") {
//                 connectionTime += 15;
//                 lossProbability += 0.04;
//             } else if (connection.transmissionType === "duplex") {
//                 connectionTime += 5;
//                 lossProbability += 0.02;
//             }

//             totalTransmissionTime += connectionTime;
//         });

//         // –ü—Ä–∏–≤–æ–¥–∏–º –≤–µ—Ä–æ—è—Ç–Ω–æ—Å—Ç—å –∫ –¥–∏–∞–ø–∞–∑–æ–Ω—É [0, 1]
//         lossProbability = Math.min(1, lossProbability);

//         return {
//             totalTransmissionTime,
//             lossProbability
//         };
//     }

//     tcpTransferSimulation(path, dataSize) {
//         const controlPackets = 5; // TCP: SYN, SYN-ACK, ACK –¥–ª—è —É—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è, FIN, FIN-ACK –¥–ª—è –∑–∞–∫—Ä—ã—Ç–∏—è
//         const retransmissionPenalty = 100; // –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø—Ä–∏ –ø–æ—Ç–µ—Ä–µ –ø–∞–∫–µ—Ç–∞ (–º—Å)
//         const headerSize = 40; // 16 –±–∞–π—Ç IP + 24 –±–∞–π—Ç–∞ TCP –∑–∞–≥–æ–ª–æ–≤–∫–∞
//         const maxPacketSize = 1500; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä TCP –ø–∞–∫–µ—Ç–∞ (–≤ –±–∞–π—Ç–∞—Ö)
//         const dataPayloadSize = maxPacketSize - headerSize; // –†–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö –≤ –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ

//         // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–µ—Ä–µ–¥–∞–Ω –ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
//         if (!dataSize || isNaN(dataSize)) {
//             console.error("Invalid dataSize provided.");
//             return;
//         }

//         // –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ –º–∞—Ä—à—Ä—É—Ç–∞
//         const pathDetails = this.getPathDetails(path);
//         const transmissionDetails = this.calculateTransmissionDetails(pathDetails);

//         const adaptiveRetransmissionChance = transmissionDetails.lossProbability;
//         const adaptiveFixedDelay = transmissionDetails.totalTransmissionTime;

//         // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
//         const dataPackets = Math.ceil(dataSize / dataPayloadSize);
//         const tcpPackets = [];
//         let totalTime = 0;
//         let retransmittedPackets = 0;
//         let totalControlPackets = controlPackets; // –£—á–∏—Ç—ã–≤–∞–µ–º –≤—Å–µ —É–ø—Ä–∞–≤–ª—è—é—â–∏–µ –ø–∞–∫–µ—Ç—ã

//         tcpPackets.push({
//             type: "Control",
//             id: "SYN",
//             header: "TCP Header",
//             payload: null,
//             status: "Sent",
//         });
//         tcpPackets.push({
//             type: "Control",
//             id: "SYN-ACK",
//             header: "TCP Header",
//             payload: null,
//             status: "Sent",
//         });
//         tcpPackets.push({
//             type: "Control",
//             id: "ACK",
//             header: "TCP Header",
//             payload: null,
//             status: "Sent",
//         });
//         totalTime += path.length * adaptiveFixedDelay * 3;

//         let remainingData = dataSize;
//         let packetCount = 0;

//         while (remainingData > 0) {
//             const payloadSize = Math.min(dataPayloadSize, remainingData);
//             let isSuccess = false;
//             packetCount++;

//             while (!isSuccess) {
//                 tcpPackets.push({
//                     type: "Data",
//                     id: `Data-${packetCount}`,
//                     header: "TCP Header",
//                     payload: `${payloadSize} bytes`,
//                     status: "Sent",
//                 });

//                 if (Math.random() > adaptiveRetransmissionChance) {
//                     isSuccess = true; // –ü–∞–∫–µ—Ç —É—Å–ø–µ—à–Ω–æ –¥–æ—Å—Ç–∞–≤–ª–µ–Ω
//                     tcpPackets[tcpPackets.length - 1].status = "Delivered";
//                     // –û—Ç–≤–µ—Ç –æ—Ç –ø–æ–ª—É—á–∞—Ç–µ–ª—è
//                     tcpPackets.push({
//                         type: "Control",
//                         id: `ACK-${packetCount}`,
//                         header: "TCP Header",
//                         payload: null,
//                         status: "Sent",
//                     });
//                     totalControlPackets++;
//                 } else {
//                     tcpPackets[tcpPackets.length - 1].status = "Lost";
//                     retransmittedPackets++;
//                     totalTime += retransmissionPenalty; // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–¥–µ—Ä–∂–∫—É –∑–∞ –ø–æ–≤—Ç–æ—Ä–Ω—É—é –æ—Ç–ø—Ä–∞–≤–∫—É
//                 }
//             }

//             remainingData -= payloadSize;
//             totalTime += path.length * adaptiveFixedDelay;
//         }

//         tcpPackets.push({
//             type: "Control",
//             id: "FIN",
//             header: "TCP Header",
//             payload: null,
//             status: "Sent",
//         });
//         tcpPackets.push({
//             type: "Control",
//             id: "FIN-ACK",
//             header: "TCP Header",
//             payload: null,
//             status: "Sent",
//         });
//         totalControlPackets += 2;
//         totalTime += path.length * adaptiveFixedDelay * 2;

//         console.log("TCP Packet Details:", tcpPackets);

//         // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞—Å—Å–∏–≤ –ø–∞–∫–µ—Ç–æ–≤ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
//         return {
//             totalPackets: tcpPackets.length,
//             controlPackets: totalControlPackets,
//             dataPackets: packetCount,
//             retransmittedPackets,
//             totalTime,
//             packetDetails: tcpPackets,
//         };
//     }

//     udpTransferSimulation(path, dataSize) {
//         const headerSize = 28; // 8 –±–∞–π—Ç UDP + 20 –±–∞–π—Ç IP –∑–∞–≥–æ–ª–æ–≤–∫–∞
//         const maxPacketSize = 1500; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä UDP –ø–∞–∫–µ—Ç–∞ (–≤ –±–∞–π—Ç–∞—Ö)
//         const dataPayloadSize = maxPacketSize - headerSize; // –†–∞–∑–º–µ—Ä –ø–æ–ª–µ–∑–Ω–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –≤ –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ

//         // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –ø–µ—Ä–µ–¥–∞–Ω –ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Ä–∞–∑–º–µ—Ä –¥–∞–Ω–Ω—ã—Ö
//         if (!dataSize || isNaN(dataSize)) {
//             console.error("Invalid dataSize provided.");
//             return;
//         }

//         // –ü–æ–ª—É—á–∞–µ–º –¥–µ—Ç–∞–ª–∏ –º–∞—Ä—à—Ä—É—Ç–∞
//         const pathDetails = this.getPathDetails(path);
//         const transmissionDetails = this.calculateTransmissionDetails(pathDetails);

//         const adaptiveFixedDelay = transmissionDetails.totalTransmissionTime;
//         const lossProbability = transmissionDetails.lossProbability;

//         // –í—ã—á–∏—Å–ª—è–µ–º –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö –ø–∞–∫–µ—Ç–æ–≤
//         const dataPackets = Math.ceil(dataSize / dataPayloadSize);
//         const udpPackets = [];
//         let totalTime = 0;
//         let lostPackets = 0;

//         let remainingData = dataSize;
//         let packetCount = 0;

//         while (remainingData > 0) {
//             const payloadSize = Math.min(dataPayloadSize, remainingData);
//             packetCount++;

//             const packet = {
//                 type: "Data",
//                 id: `Data-${packetCount}`,
//                 header: "UDP Header",
//                 payload: `${payloadSize} bytes`,
//                 status: Math.random() > lossProbability ? "Delivered" : "Lost",
//             };

//             udpPackets.push(packet);

//             if (packet.status === "Lost") {
//                 lostPackets++;
//             }

//             remainingData -= payloadSize;
//             totalTime += path.length * adaptiveFixedDelay;
//         }

//         console.log("UPD Packet Details:", udpPackets);

//         // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞—Å—Å–∏–≤ –ø–∞–∫–µ—Ç–æ–≤ –∏ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
//         return {
//             totalPackets: udpPackets.length,
//             dataPackets: packetCount,
//             lostPackets,
//             totalTime,
//             packetDetails: udpPackets,
//         };
//     }

//     transferDataWithProtocols(fromWorkstationId, toWorkstationId, dataSize) {
//         const path = this.dijkstra(fromWorkstationId, toWorkstationId);

//         if (!path) {
//             console.log(`No path found between ${fromWorkstationId} and ${toWorkstationId}`);
//             return;
//         }

//         const resultDiv = document.getElementById('result-transfer-div');
//         resultDiv.innerHTML = ''; // –û—á–∏—Å—Ç–∏–º —Ä–µ–∑—É–ª—å—Ç–∞—Ç –ø–µ—Ä–µ–¥ –≤—ã–≤–æ–¥–æ–º

//         const tcp = this.tcpTransferSimulation(path, dataSize);

//         resultDiv.innerHTML = `
//             <br><b>TCP:</b><br>
//             Total Packets Sent: ${tcp.totalPackets}<br>
//             Information Packets: ${tcp.dataPackets}<br>
//             Control Packets: ${tcp.controlPackets}<br>
//             Retransmitted Packets: ${tcp.retransmittedPackets}<br>
//             Total Time: ${tcp.totalTime} ms<br>
//         `;

//         const udp = this.udpTransferSimulation(path, dataSize);

//         resultDiv.innerHTML += `
//             <br><b>UDP:</b><br>
//             Total Packets Sent: ${udp.totalPackets}<br>
//             Information Packets: ${udp.dataPackets}<br>
//             Control Packets: 0<br>
//             Lost Packets: ${udp.lostPackets}<br>
//             Total Time: ${udp.totalTime} ms<br>
//         `;
        

//         // –ü–æ–¥—Å–≤–µ—Ç–∫–∞ –º–∞—Ä—à—Ä—É—Ç–∞
//         this.highlightPath(path);

//         // –í—ã–≤–æ–¥ –º–∞—Ä—à—Ä—É—Ç–∞
//         this.displayWorkstationRoutingTable(fromWorkstationId);

//     }


// }




//     class SideMenu {
//         constructor(container, networkConfig) {
//             this.container = container;
//             this.menu = null;
//             this.transferDataMenu = null;  // –ù–æ–≤–æ–µ –º–µ–Ω—é –¥–ª—è –ø–µ—Ä–µ–¥–∞—á–∏ –¥–∞–Ω–Ω—ã—Ö
//             this.networkConfig = networkConfig;
//         }

//         // –û—Ç–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
//         openMenu(object) {
//             if (this.menu) {
//                 this.updateMenu(object);
//                 this.menu.style.transform = 'translateX(0)'; // –ü–ª–∞–≤–Ω–æ –æ—Ç–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
//             } else {
//                 this.createMenu(object);
//             }
//         }

//         // –ó–∞–∫—Ä—ã—Ç–∏–µ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
//         closeMenu() {
//             if (this.menu) {
//                 this.menu.style.transform = 'translateX(100%)'; // –ü–ª–∞–≤–Ω–æ –∑–∞–∫—Ä—ã–≤–∞–µ–º –º–µ–Ω—é
//             }
//         }

//         // –û—Ç–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø–ª–∞–≤–Ω–æ
//         openTransferDataMenu() {
//             if (!this.transferDataMenu) {
//                 this.createTransferDataMenu();
//             }

//             // –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–ª–∞–≤–Ω–æ–≥–æ –ø–æ—è–≤–ª–µ–Ω–∏—è
//             this.transferDataMenu.style.transform = 'translateX(0)';
//         }

//         // –ó–∞–∫—Ä—ã—Ç–∏–µ –º–µ–Ω—é –ø–ª–∞–≤–Ω–æ
//         closeTransferDataMenu() {
//             if (this.transferDataMenu) {
//                 // –ü—Ä–∏–º–µ–Ω—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é –ø–ª–∞–≤–Ω–æ–≥–æ —Å–∫—Ä—ã—Ç–∏—è
//                 this.transferDataMenu.style.transform = 'translateX(-100%)';
//             }
//         }

//         // –ú–µ—Ç–æ–¥ –¥–ª—è —Å–æ–∑–¥–∞–Ω–∏—è –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –º–µ–Ω—é
//         createMenu(object) {
//             this.menu = document.createElement('div');
//             this.menu.classList.add('side-menu', 'fixed', 'top-0', 'right-0', 'z-20', 'w-96', 'h-full', 'bg-white', 'shadow-xl', 'p-6', 'transform', 'translate-x-full');

//             // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
//             const title = document.createElement('h2');
//             title.classList.add('text-xl', 'font-semibold');
//             title.innerText = 'Configuration';
//             this.menu.appendChild(title);

//             const details = document.createElement('div');
//             details.classList.add('mt-4');

//             // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –æ–±—ä–µ–∫—Ç –∫–∞–±–µ–ª–µ–º
//             if (object.classList.contains('wire')) {
//                 // –ï—Å–ª–∏ —ç—Ç–æ –∫–∞–±–µ–ª—å
//                 details.innerHTML = `
//                     <p><strong>ID:</strong> ${object.dataset.id}</p>
//                     <p><strong>Channel Type:</strong> 
//                         <select class="channel-type-select">
//                             <option value="default" ${object.dataset.channelType === 'default' ? 'selected' : ''}>default</option>
//                             <option value="satellite" ${object.dataset.channelType === 'satellite' ? 'selected' : ''}>satellite</option>
//                         </select>
//                     </p>
//                     <p><strong>Transmission Type:</strong> 
//                         <select class="transmission-type-select">
//                             <option value="duplex" ${object.dataset.transmissionType === 'duplex' ? 'selected' : ''}>duplex</option>
//                             <option value="halfduplex" ${object.dataset.transmissionType === 'halfduplex' ? 'selected' : ''}>halfduplex</option>
//                         </select>
//                     </p>
//                     <p><strong>Weight:</strong> ${object.dataset.weight}</p>
//                     <p><strong>X:</strong> ${parseFloat(object.style.left)}px</p>
//                     <p><strong>Y:</strong> ${parseFloat(object.style.top)}px</p>
//                     <p><strong>Status:</strong> <input type="checkbox" class="toggle-status" ${object.dataset.objectStatus === 'off' ? '' : 'checked'} /> Active</p>
//                 `;
//                 details.querySelector('.channel-type-select').addEventListener('change', (e) => this.updateCableType(e, object));
//                 details.querySelector('.transmission-type-select').addEventListener('change', (e) => this.updateTransmissionType(e, object));
//                 details.querySelector('.toggle-status').addEventListener('change', (e) => this.toggleStatus(e, object));

//             } else {
//                 // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ä–µ–∫—Ç (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∏–ª–∏ —Ä–∞–±–æ—á–∞—è —Å—Ç–∞–Ω—Ü–∏—è)
//                 details.innerHTML = `
//                     <p><strong>ID:</strong> ${object.dataset.id}</p>
//                     <p><strong>Type:</strong> ${object.dataset.type}</p>
//                     <p><strong>X:</strong> ${parseFloat(object.style.left)}px</p>
//                     <p><strong>Y:</strong> ${parseFloat(object.style.top)}px</p>
//                     <p><strong>Status:</strong> <input type="checkbox" class="toggle-status" ${object.dataset.objectStatus === 'off' ? '' : 'checked'} /> Active</p>
//                 `;
//                 details.querySelector('.toggle-status').addEventListener('change', (e) => this.toggleStatus(e, object));
//             }

//             this.menu.appendChild(details);

//             const closeButton = document.createElement('button');
//             closeButton.classList.add('mt-6', 'py-2', 'px-4', 'bg-blue-500', 'text-white', 'rounded', 'hover:bg-blue-700', 'transition', 'duration-200');
//             closeButton.innerText = 'Close';
//             closeButton.addEventListener('click', () => this.closeMenu());
//             this.menu.appendChild(closeButton);

//             this.container.appendChild(this.menu);
//         }

//         createTransferDataMenu() {
//             // –°–æ–∑–¥–∞–µ–º –º–µ–Ω—é, –Ω–æ —Å—Ä–∞–∑—É –Ω–µ –¥–æ–±–∞–≤–ª—è–µ–º –∞–Ω–∏–º–∞—Ü–∏—é
//             this.transferDataMenu = document.createElement('div');
//             this.transferDataMenu.classList.add('side-menu', 'fixed', 'top-0', 'left-0', 'z-20', 'w-96', 'h-full', 'bg-white', 'shadow-xl', 'p-6', 'transform', 'translate-x-full', 'transition-transform', 'duration-300');

//             // –î–æ–±–∞–≤–ª—è–µ–º –∑–∞–≥–æ–ª–æ–≤–æ–∫
//             const title = document.createElement('h2');
//             title.classList.add('text-xl', 'font-semibold');
//             title.innerText = 'Transfer Data';
//             this.transferDataMenu.appendChild(title);

//             const details = document.createElement('div');
//             details.classList.add('mt-4');

//             // –°–æ–∑–¥–∞–µ–º –ø–æ–ª–µ –¥–ª—è –≤—ã–±–æ—Ä–∞ –∏—Å—Ö–æ–¥–Ω–æ–π —Ä–∞–±–æ—á–µ–π —Å—Ç–∞–Ω—Ü–∏–∏
//             details.innerHTML += `
//                 <p><strong>From Workstation:</strong>
//                     <select id="from-workstation-select"></select>
//                 </p>
//                 <p><strong>To Workstation:</strong>
//                     <select id="to-workstation-select"></select>
//                 </p>
//                 <p><strong>Data Size:</strong>
//                     <input type="number" id="data-size" value="1500" min="1" max="1500000" />
//                 </p>
//             `;

//             // –ó–∞–ø–æ–ª–Ω—è–µ–º —Å–ø–∏—Å–∫–∏ –≤—ã–±–æ—Ä–∞ —Ä–∞–±–æ—á–∏–º–∏ —Å—Ç–∞–Ω—Ü–∏—è–º–∏
//             const fromWorkstationSelect = details.querySelector('#from-workstation-select');
//             const toWorkstationSelect = details.querySelector('#to-workstation-select');

//             // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —Ä–∞–±–æ—á–∏–µ —Å—Ç–∞–Ω—Ü–∏–∏ –Ω–∞ –ø–æ–ª–æ—Ç–Ω–µ
//             const workstations = document.querySelectorAll('[data-type="workstation"]');

//             workstations.forEach(workstation => {
//                 const id = workstation.dataset.id;
//                 const text = workstation.querySelector('.text-xs').innerText; // –ü–æ–ª—É—á–∞–µ–º —Ç–µ–∫—Å—Ç –∏–∑ span —Å –∫–ª–∞—Å—Å–æ–º text-xs

//                 const option = document.createElement('option');
//                 option.value = id;
//                 option.innerText = `${text} (${id})`; // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º ID –∏ —Ç–µ–∫—Å—Ç –∏–∑ text-xs
//                 fromWorkstationSelect.appendChild(option);

//                 const option2 = option.cloneNode(true); // –ö–ª–æ–Ω–∏—Ä—É–µ–º –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Å–ø–∏—Å–∫–∞
//                 toWorkstationSelect.appendChild(option2);
//             });


//             // –î–æ–±–∞–≤–ª—è–µ–º –∫–Ω–æ–ø–∫—É Send
//             const sendButton = document.createElement('button');
//             sendButton.classList.add('mt-6', 'py-2', 'px-4', 'bg-green-500', 'text-white', 'rounded', 'hover:bg-green-700', 'transition', 'duration-200');
//             sendButton.innerText = 'Send';
//             sendButton.id = 'send-data-between';
//             details.appendChild(sendButton);

//             const resultBlock = document.createElement('div');
//             resultBlock.id = 'result-transfer-div';

//             this.transferDataMenu.appendChild(details);

//             const closeButton = document.createElement('button');
//             closeButton.classList.add('mt-6', 'py-2', 'px-4', 'bg-blue-500', 'text-white', 'rounded', 'hover:bg-blue-700', 'transition', 'duration-200');
//             closeButton.innerText = 'Close';
//             closeButton.addEventListener('click', () => this.closeTransferDataMenu());
//             this.transferDataMenu.appendChild(closeButton);

//             this.transferDataMenu.appendChild(resultBlock);

//             this.container.appendChild(this.transferDataMenu);
//         }

//         getAllWorkstations() {
//             // –ü–æ–ª—É—á–∞–µ–º –≤—Å–µ —ç–ª–µ–º–µ–Ω—Ç—ã —Å –∞—Ç—Ä–∏–±—É—Ç–æ–º data-type="workstation"
//             const workstations = document.querySelectorAll('[data-type="workstation"]');
            
//             // –°–æ–∑–¥–∞–µ–º –º–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è ID —Ä–∞–±–æ—á–∏—Ö —Å—Ç–∞–Ω—Ü–∏–π
//             const workstationIds = [];
            
//             // –ü—Ä–æ—Ö–æ–¥–∏–º –ø–æ –≤—Å–µ–º —Ä–∞–±–æ—á–∏–º —Å—Ç–∞–Ω—Ü–∏—è–º –∏ –¥–æ–±–∞–≤–ª—è–µ–º –∏—Ö ID –≤ –º–∞—Å—Å–∏–≤
//             workstations.forEach(workstation => {
//                 workstationIds.push(workstation.dataset.id); // –°–æ—Ö—Ä–∞–Ω—è–µ–º ID
//             });

//             // –í–æ–∑–≤—Ä–∞—â–∞–µ–º –º–∞—Å—Å–∏–≤ —Å ID —Ä–∞–±–æ—á–∏—Ö —Å—Ç–∞–Ω—Ü–∏–π
//             return workstationIds;
//         }

//         updateMenu(object) {
//             const details = this.menu.querySelector('div');
            
//             // –û–±–Ω–æ–≤–ª—è–µ–º —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç —Ç–∏–ø–∞ –æ–±—ä–µ–∫—Ç–∞
//             if (object.classList.contains('wire')) {
//                 // –ï—Å–ª–∏ —ç—Ç–æ –∫–∞–±–µ–ª—å
//                 details.innerHTML = ` 
//                     <p><strong>ID:</strong> ${object.dataset.id}</p>
//                     <p><strong>Channel Type:</strong> 
//                         <select class="channel-type-select">
//                             <option value="default" ${object.dataset.channelType === 'default' ? 'selected' : ''}>default</option>
//                             <option value="satellite" ${object.dataset.channelType === 'satellite' ? 'selected' : ''}>satellite</option>
//                         </select>
//                     </p>
//                     <p><strong>Transmission Type:</strong> 
//                         <select class="transmission-type-select">
//                             <option value="duplex" ${object.dataset.transmissionType === 'duplex' ? 'selected' : ''}>duplex</option>
//                             <option value="halfduplex" ${object.dataset.transmissionType === 'halfduplex' ? 'selected' : ''}>halfduplex</option>
//                         </select>
//                     </p>
//                     <p><strong>Weight:</strong> ${object.dataset.weight}</p>
//                     <p><strong>X:</strong> ${parseFloat(object.style.left)}px</p>
//                     <p><strong>Y:</strong> ${parseFloat(object.style.top)}px</p>
//                     <p><strong>Status:</strong> <input type="checkbox" class="toggle-status" ${object.dataset.objectStatus === 'off' ? '' : 'checked'} /> Active</p>`
//                 ;
//                 details.querySelector('.channel-type-select').addEventListener('change', (e) => this.updateCableType(e, object));
//                 details.querySelector('.transmission-type-select').addEventListener('change', (e) => this.updateTransmissionType(e, object));
//                 details.querySelector('.toggle-status').addEventListener('change', (e) => this.toggleStatus(e, object));
//             } else {
//                 // –ï—Å–ª–∏ —ç—Ç–æ –æ–±—ä–µ–∫—Ç (–º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä –∏–ª–∏ —Ä–∞–±–æ—á–∞—è —Å—Ç–∞–Ω—Ü–∏—è)
//                 details.innerHTML = `
//                     <p><strong>ID:</strong> ${object.dataset.id}</p>
//                     <p><strong>Type:</strong> ${object.dataset.type}</p>
//                     <p><strong>X:</strong> ${parseFloat(object.style.left)}px</p>
//                     <p><strong>Y:</strong> ${parseFloat(object.style.top)}px</p>
//                     <p><strong>Status:</strong> <input type="checkbox" class="toggle-status" ${object.dataset.objectStatus === 'off' ? '' : 'checked'} /> Active</p>`
//                 ;
//                 details.querySelector('.toggle-status').addEventListener('change', (e) => this.toggleStatus(e, object));
//             }
//         }

//         // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –∫–∞–Ω–∞–ª–∞ –∫–∞–±–µ–ª—è
//         updateCableType(e, object) {
//             object.dataset.channelType = e.target.value;
//         }

//         // –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Ç–∏–ø–∞ –ø–µ—Ä–µ–¥–∞—á–∏ –∫–∞–±–µ–ª—è
//         updateTransmissionType(e, object) {
//             object.dataset.transmissionType = e.target.value;
//         }

//         // –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏–∑–º–µ–Ω–µ–Ω–∏—è —Å–æ—Å—Ç–æ—è–Ω–∏—è (–≤–∫–ª—é—á–∏—Ç—å/–≤—ã–∫–ª—é—á–∏—Ç—å)
//         toggleStatus(e, object) {
//             const isActive = e.target.checked;

//             // –ï—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –≤—ã–∫–ª—é—á–µ–Ω
//             if (isActive) {
//                 object.dataset.objectStatus = 'on'; // –í–∫–ª—é—á–∞–µ–º
//                 object.style.opacity = '1'; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å
//             } else {
//                 object.dataset.objectStatus = 'off'; // –í—ã–∫–ª—é—á–∞–µ–º
//                 object.style.opacity = '0.5'; // –£–º–µ–Ω—å—à–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å (–ø—Ä–∏–≥–ª—É—à–∞–µ–º)
//             }
//         }
//     }



//     class WireManager {
//         constructor(canvas, weights) {
//             this.canvas = canvas;
//             this.weights = weights;
//             this.wires = [];
//             this.sideMenu = new SideMenu(document.body);  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
//         }

//         isWireExisting(start, end) {
//             return this.wires.some(wire => (wire.start === start && wire.end === end) || (wire.start === end && wire.end === start));
//         }

//         createWire(startElement, endElement, cableType, transmissionType, weight, objectStatus = 'on') {
//             const wire = document.createElement('div');
//             wire.classList.add('wire');
//             wire.start = startElement;
//             wire.end = endElement;


//             wire.dataset.id = this.wires.length; 
//             wire.dataset.channelType = cableType.toLowerCase(); 
//             wire.dataset.transmissionType = transmissionType.toLowerCase();  
//             wire.dataset.weight = weight; 
//             wire.dataset.objectStatus = objectStatus;   

//             wire.style.opacity = (objectStatus === 'off') ? '0.5' : '1';

//             const label = document.createElement('div');
//             label.classList.add('wire-label');
//             wire.label = label;
//             this.canvas.appendChild(label);

//             this.updateWire(wire);
//             this.canvas.appendChild(wire);
//             this.wires.push(wire);

//             const wireId = this.wires.length - 1;

//             // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞ –Ω–∞ –∫–∞–±–µ–ª—å
//             wire.addEventListener('dblclick', () => this.sideMenu.openMenu(wire));

//             return {
//                 id: wireId,
//                 cableType: cableType,
//                 transmissionType: transmissionType,
//                 weight: weight,
//                 objectStatus: objectStatus
//             };
//         }

//         updateWire(wire) {
//             const startRect = wire.start.getBoundingClientRect();
//             const endRect = wire.end.getBoundingClientRect();

//             const canvasRect = this.canvas.getBoundingClientRect();

//             const startX = startRect.left + startRect.width / 2 - canvasRect.left;
//             const startY = startRect.top + startRect.height / 2 - canvasRect.top;
//             const endX = endRect.left + endRect.width / 2 - canvasRect.left;
//             const endY = endRect.top + endRect.height / 2 - canvasRect.top;

//             const length = Math.sqrt(Math.pow(endX - startX, 2) + Math.pow(endY - startY, 2));
//             const angle = Math.atan2(endY - startY, endX - startX) * (180 / Math.PI);

//             wire.style.width = `${length}px`;
//             wire.style.transform = `rotate(${angle}deg)`;
//             wire.style.transformOrigin = '0 0';
//             wire.style.left = `${startX}px`;
//             wire.style.top = `${startY}px`;

//             // –ü–æ–ª—É—á–∞–µ–º –≤–µ—Å —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –∫–∞–Ω–∞–ª–∞
//             const weight = this.getWeight(length, wire.dataset.channelType);
//             wire.label.innerText = `${weight}`;

//             wire.label.addEventListener('dblclick', () => this.sideMenu.openMenu(wire));

//             const midX = (startX + endX) / 2 + 10;
//             const midY = (startY + endY) / 2 - 15;

//             const offsetX = 15;
//             const offsetY = 0;

//             wire.label.style.left = `${midX + offsetX}px`;
//             wire.label.style.top = `${midY + offsetY}px`;
//         }

//         getWeight(length, channelType) {
//             // –ï—Å–ª–∏ –∫–∞–Ω–∞–ª satellite, –ø—Ä–∏–º–µ–Ω—è–µ–º –æ—Å–æ–±—É—é –ª–æ–≥–∏–∫—É
//             if (channelType === 'satellite') {
//                 if (length < 100) return this.weights[6];  // –í–µ—Å –¥–ª—è —Å–ø—É—Ç–Ω–∏–∫–æ–≤–æ–≥–æ –∫–∞–Ω–∞–ª–∞ –≤ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –æ—Ç –¥–ª–∏–Ω—ã
//                 if (length < 150) return this.weights[7];
//                 if (length < 200) return this.weights[8];
//                 return this.weights[9];  // –î–ª—è –±–æ–ª–µ–µ –¥–ª–∏–Ω–Ω—ã—Ö —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã—Ö –∫–∞–Ω–∞–ª–æ–≤
//             }

//             // –î–ª—è –¥—Ä—É–≥–∏—Ö —Ç–∏–ø–æ–≤ –∫–∞–Ω–∞–ª–æ–≤ –ø—Ä–∏–º–µ–Ω—è–µ–º —Ç–µ–∫—É—â—É—é –ª–æ–≥–∏–∫—É
//             if (length < 100) return this.weights[0];
//             if (length < 150) return this.weights[1];
//             if (length < 200) return this.weights[2];
//             if (length < 300) return this.weights[3];
//             if (length < 400) return this.weights[4];
//             if (length < 500) return this.weights[5];
//             if (length < 600) return this.weights[6];
//             if (length < 700) return this.weights[7];
//             if (length < 800) return this.weights[8];
//             return this.weights[9];
//         }


//         removeWire(wire) {
//             this.canvas.removeChild(wire);
//             this.canvas.removeChild(wire.label);
//             const index = this.wires.indexOf(wire);
//             if (index > -1) {
//                 this.wires.splice(index, 1);
//             }
//         }
//     }


//     class NetworkConfig {
//         constructor() {
//             this.objects = [];
//             this.wires = [];
//         }

//         addObject(type, x, y, uniqueId, objectStatus) {
//             this.objects.push({
//                 type: type,
//                 x: x,
//                 y: y,
//                 id: uniqueId,
//                 objectStatus: objectStatus  // –°–æ—Ö—Ä–∞–Ω—è–µ–º —Å—Ç–∞—Ç—É—Å
//             });
//         }

//         addWire(wire) {
//             this.wires.push(wire);
//         }

//         exportToJSON() {
//             return JSON.stringify({
//                 objects: this.objects,
//                 wires: this.wires
//             }, null, 2);
//         }

//         static importFromJSON(jsonData) {
//             const data = JSON.parse(jsonData);
//             const config = new NetworkConfig();
//             config.objects = data.objects;
//             config.wires = data.wires;
//             return config;
//         }
//     }

//     class NetworkApp {
//         constructor(canvas, canvasContainer) {
//             this.canvas = canvas;
//             this.canvasContainer = canvasContainer;
//             this.routerCounter = 0;
//             this.workstationCounter = 0;
//             this.elements = [];
//             this.isWireMode = false;
//             this.isRemoveWireMode = false;
//             this.isRemoveObjectMode = false;
//             this.startElement = null;
//             this.endElement = null;
//             this.networkConfig = new NetworkConfig();

//             this.wireManager = new WireManager(canvas, [3, 5, 6, 8, 10, 12, 17, 20, 25, 27]);
//             this.sideMenu = new SideMenu(document.body, this.networkConfig);  // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ–º –±–æ–∫–æ–≤–æ–µ –º–µ–Ω—é
//         }

//         createElement(type, x = null, y = null, id = null, objectStatus = 'on') {
//             const iconMap = {
//                 router: 'üõú',
//                 workstation: 'üíª'
//             };

//             const posX = x ?? this.generateUniquePosition().x;
//             const posY = y ?? this.generateUniquePosition().y;

//             const element = document.createElement('div');
//             element.classList.add('absolute', 'element', 'shadow-lg', 'cursor-move');
//             element.style.width = '70px';
//             element.style.height = '70px';
//             element.style.left = `${posX}px`;
//             element.style.top = `${posY}px`;
//             element.style.backgroundColor = type === 'workstation' ? '#d4f5d4' : 'white';

//             const icon = document.createElement('span');
//             icon.classList.add('text-lg');
//             icon.innerText = iconMap[type];

//             const label = document.createElement('span');
//             label.classList.add('text-xs');

//             // –£–≤–µ–ª–∏—á–∏–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫ –∏ –∑–∞–¥–∞–µ–º –ª–µ–π–±–ª
//             const counter = ++this[`${type}Counter`];
//             label.innerText = `${counter}`;

//             element.appendChild(icon);
//             element.appendChild(label);
//             this.canvas.appendChild(element);
//             this.elements.push(element);

//             this.makeDraggable(element);

//             // –°–æ–∑–¥–∞–µ–º —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID, –Ω–∞—á–∏–Ω–∞—è —Å –µ–¥–∏–Ω–∏—Ü—ã
//             const uniqueId = id || `${type}-${counter}`;
//             element.dataset.id = uniqueId; 
//             element.dataset.type = type;  
//             element.dataset.objectStatus = objectStatus;  

//             // –î–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è –¥–ª—è –¥–≤–æ–π–Ω–æ–≥–æ –∫–ª–∏–∫–∞ –Ω–∞ –æ–±—ä–µ–∫—Ç
//             element.addEventListener('dblclick', () => this.sideMenu.openMenu(element));

//             this.networkConfig.addObject(type, posX, posY, uniqueId);

//             return element;
//         }

//     createWireMode(addWireButton) {
//         if (this.isWireMode) return;
//         this.isWireMode = true;
//         addWireButton.classList.add('button-active');

//         this.boundHandleWireClick = this.handleWireClick.bind(this);
//         this.canvas.addEventListener('click', this.boundHandleWireClick);
//     }

//     handleWireClick(event) {
//         const target = event.target.closest('.element');
//         if (!target) {
//             if (this.startElement) {
//                 this.startElement.classList.remove('highlight');
//                 this.startElement = null;
//             }
//             this.exitWireMode();
//             return;
//         }

//         if (!this.startElement) {
//             this.startElement = target;
//             this.startElement.classList.add('highlight');
//         } else if (target !== this.startElement) {
//             this.endElement = target;

//             if (this.wireManager.isWireExisting(this.startElement, this.endElement)) {
//                 this.startElement.classList.remove('highlight');
//                 this.startElement = null;
//                 this.endElement = null;
//                 return;
//             }

//             const cableType = "default";
//             const transmissionType = "duplex"; 

//             const weight = this.wireManager.getWeight(this.calculateLength(this.startElement, this.endElement));

//             const wire = this.wireManager.createWire(this.startElement, this.endElement, cableType, transmissionType, weight);
//             this.networkConfig.addWire(wire);

//             this.startElement.classList.remove('highlight');
//             this.endElement.classList.remove('highlight');
//             this.startElement = null;
//             this.endElement = null;

//             this.exitWireMode();
//         }
//     }

//         calculateLength(startElement, endElement) {
//             const startRect = startElement.getBoundingClientRect();
//             const endRect = endElement.getBoundingClientRect();

//             return Math.sqrt(
//                 Math.pow(endRect.left - startRect.left, 2) + Math.pow(endRect.top - startRect.top, 2)
//             );
//         }

//         exitWireMode() {
//             this.isWireMode = false;
//             document.getElementById('add-wire').classList.remove('button-active');
//             this.canvas.removeEventListener('click', this.boundHandleWireClick);
//             this.boundHandleWireClick = null;
//             this.startElement = null;
//             this.endElement = null;
//         }

//         createRemoveWireMode(removeWireButton) {
//             if (this.isRemoveWireMode) return;
//             this.isRemoveWireMode = true;
//             removeWireButton.classList.add('button-active');

//             this.boundHandleWireRemoval = this.handleWireRemoval.bind(this);
//             this.canvas.addEventListener('click', this.boundHandleWireRemoval);
//         }

//         handleWireRemoval(event) {
//             const wire = event.target.closest('.wire');
//             if (wire) {
//                 this.wireManager.removeWire(wire);
//             }
//             this.exitRemoveWireMode();
//         }

//         exitRemoveWireMode() {
//             this.isRemoveWireMode = false;
//             document.getElementById('remove-wire').classList.remove('button-active');
//             this.canvas.removeEventListener('click', this.boundHandleWireRemoval);
//             this.boundHandleWireRemoval = null;
//         }

//         createRemoveObjectMode(removeObjectButton) {
//             if (this.isRemoveObjectMode) return;
//             this.isRemoveObjectMode = true;
//             removeObjectButton.classList.add('button-active');

//             this.boundHandleObjectRemoval = this.handleObjectRemoval.bind(this);
//             this.canvas.addEventListener('click', this.boundHandleObjectRemoval);
//         }

//         handleObjectRemoval(event) {
//             const target = event.target.closest('.element');
//             if (target) {
//                 const wiresToRemove = [];
//                 this.wireManager.wires.forEach(wire => {
//                     if (wire.start === target || wire.end === target) {
//                         wiresToRemove.push(wire);
//                     }
//                 });

//                 wiresToRemove.forEach(wire => {
//                     this.wireManager.removeWire(wire);
//                 });

//                 this.canvas.removeChild(target);
//                 const index = this.elements.indexOf(target);
//                 if (index > -1) {
//                     this.elements.splice(index, 1);
//                 }
//             }
//             this.exitRemoveObjectMode();
//         }

//         exitRemoveObjectMode() {
//             this.isRemoveObjectMode = false;
//             document.getElementById('remove-object').classList.remove('button-active');
//             this.canvas.removeEventListener('click', this.boundHandleObjectRemoval);
//             this.boundHandleObjectRemoval = null;
//         }

//         makeDraggable(element) {
//             interact(element).draggable({
//                 modifiers: [
//                     interact.modifiers.restrictRect({
//                         restriction: this.canvasContainer,
//                         endOnly: true
//                     })
//                 ],
//                 listeners: {
//                     move: (event) => this.handleDrag(event, element)
//                 }
//             });
//         }

//         handleDrag(event, element) {
//             let x = (parseFloat(element.getAttribute('data-x')) || 0) + event.dx;
//             let y = (parseFloat(element.getAttribute('data-y')) || 0) + event.dy;

//             const elementRect = element.getBoundingClientRect();
//             const canvasRect = this.canvasContainer.getBoundingClientRect();

//             for (const other of this.elements) {
//                 if (other !== element) {
//                     const otherRect = other.getBoundingClientRect();
//                     if (
//                         elementRect.right + event.dx > otherRect.left &&
//                         elementRect.left + event.dx < otherRect.right &&
//                         elementRect.bottom + event.dy > otherRect.top &&
//                         elementRect.top + event.dy < otherRect.bottom
//                     ) {
//                         return;
//                     }
//                 }
//             }

//             if (elementRect.left + event.dx < canvasRect.left) x -= event.dx;
//             if (elementRect.top + event.dy < canvasRect.top) y -= event.dy;
//             if (elementRect.right + event.dx > canvasRect.right) x -= event.dx;
//             if (elementRect.bottom + event.dy > canvasRect.bottom) y -= event.dy;

//             element.style.transform = `translate(${x}px, ${y}px)`;
//             element.setAttribute('data-x', x);
//             element.setAttribute('data-y', y);

//             this.wireManager.wires.forEach(wire => {
//                 if (wire.start === element || wire.end === element) {
//                     this.wireManager.updateWire(wire);
//                 }
//             });
//         }

//         generateUniquePosition() {
//             let x, y;
//             let overlap;
//             do {
//                 x = Math.random() * (this.canvas.offsetWidth - 70);
//                 y = Math.random() * (this.canvas.offsetHeight - 70);
                
//                 overlap = this.isOverlapping(x, y);
//             } while (overlap); 

//             return { x, y };
//         }

//         isOverlapping(x, y) {
//             return this.elements.some(el => {
//                 const rect = el.getBoundingClientRect();
//                 const canvasRect = this.canvas.getBoundingClientRect();
//                 const elX = rect.left - canvasRect.left;
//                 const elY = rect.top - canvasRect.top;
                
//                 return Math.abs(elX - x) < 70 && Math.abs(elY - y) < 70;
//             });
//         }

//         // –ú–µ—Ç–æ–¥ –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ —Å —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ–º —Å–æ—Å—Ç–æ—è–Ω–∏—è
//         getNetworkConfig() {
//             this.networkConfig.objects = [];
//             this.networkConfig.wires = [];

//             this.elements.forEach((element) => {
//                 this.networkConfig.addObject(element.dataset.type, parseFloat(element.style.left), parseFloat(element.style.top), element.dataset.id, element.dataset.objectStatus);
//             });

//             this.wireManager.wires.forEach((wire) => {
//                 const wireData = {
//                     id: wire.dataset.id,
//                     startId: wire.start.dataset.id,
//                     endId: wire.end.dataset.id,
//                     cableType: wire.dataset.channelType,
//                     transmissionType: wire.dataset.transmissionType,
//                     weight: wire.dataset.weight,
//                     objectStatus: wire.dataset.objectStatus  
//                 };
//                 this.networkConfig.addWire(wireData);
//             });
//             return this.networkConfig;
//         }
//         downloadConfig() {
//             this.networkConfig.objects = [];
//             this.networkConfig.wires = [];

//             this.elements.forEach((element) => {
//                 this.networkConfig.addObject(element.dataset.type, parseFloat(element.style.left), parseFloat(element.style.top), element.dataset.id, element.dataset.objectStatus);
//             });

//             this.wireManager.wires.forEach((wire) => {
//                 const wireData = {
//                     id: wire.dataset.id,
//                     startId: wire.start.dataset.id,
//                     endId: wire.end.dataset.id,
//                     cableType: wire.dataset.channelType,
//                     transmissionType: wire.dataset.transmissionType,
//                     weight: wire.dataset.weight,
//                     objectStatus: wire.dataset.objectStatus 
//                 };
//                 this.networkConfig.addWire(wireData);
//             });

//             const json = this.networkConfig.exportToJSON();
//             const blob = new Blob([json], { type: 'application/json' });
//             const url = URL.createObjectURL(blob);
//             const a = document.createElement('a');
//             a.href = url;
//             a.download = 'network-config.json';
//             a.click();
//         }

//         loadConfig(event) {
//             const file = event.target.files[0];
//             if (!file) return;

//             const reader = new FileReader();
//             reader.onload = (e) => {
//                 const jsonData = e.target.result;
//                 const config = NetworkConfig.importFromJSON(jsonData);
//                 this.applyConfig(config);
//             };
//             reader.readAsText(file);
//         }

//         applyConfig(config) {
//             // –£–¥–∞–ª—è–µ–º –≤—Å–µ —Ç–µ–∫—É—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã –∏ –ø—Ä–æ–≤–æ–¥–∞
//             this.elements.forEach(element => this.canvas.removeChild(element));
//             this.wireManager.wires.forEach(wire => {
//                 this.canvas.removeChild(wire);
//                 this.canvas.removeChild(wire.label);
//             });

//             // –û—á–∏—â–∞–µ–º –º–∞—Å—Å–∏–≤—ã
//             this.elements = [];
//             this.wireManager.wires = [];

//             // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –æ–±—ä–µ–∫—Ç—ã (—Å—Ç–∞–Ω—Ü–∏–∏ –∏ –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ç–æ—Ä—ã)
//             config.objects.forEach((obj) => {
//                 let { x, y } = obj; 
//                 while (this.isOverlapping(x, y)) {
//                     const newPosition = this.generateUniquePosition();
//                     x = newPosition.x;
//                     y = newPosition.y;
//                 }
//                 this.createElement(obj.type, x, y, obj.id, obj.objectStatus);  

//                 // –ò—â–µ–º —Å–æ–∑–¥–∞–Ω–Ω—ã–π —ç–ª–µ–º–µ–Ω—Ç –ø–æ –µ–≥–æ ID
//                 const element = this.elements.find(el => el.dataset.id === obj.id);
//                 if (element) {
//                     element.dataset.objectStatus = obj.objectStatus;  // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º —Å—Ç–∞—Ç—É—Å
//                     element.style.opacity = (obj.objectStatus === 'off') ? '0.5' : '1'; // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –≤–∏–¥–∏–º–æ—Å—Ç—å
//                 }
//             });

//             // –í–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º –ø—Ä–æ–≤–æ–¥–∞
//             config.wires.forEach((wire) => {
//                 const startElement = this.elements.find(el => el.dataset.id === wire.startId);
//                 const endElement = this.elements.find(el => el.dataset.id === wire.endId);

//                 if (startElement && endElement) {
//                     const newWire = this.wireManager.createWire(startElement, endElement, wire.cableType, wire.transmissionType, wire.weight, wire.objectStatus);
//                 }
//             })
//         }

        
//         getRandomWeight() {
//             const weights = [3, 5, 6, 8, 10, 12, 17, 20, 25, 27];
//             return weights[Math.floor(Math.random() * weights.length)];
//         }

//         createRandomizedNetwork() {
//              // –°—Ç–∏—Ä–∞–µ–º –≤—Å–µ –ø—Ä–µ–¥—ã–¥—É—â–∏–µ —ç–ª–µ–º–µ–Ω—Ç—ã
//             this.elements.forEach(element => this.canvas.removeChild(element));
//             this.wireManager.wires.forEach(wire => {
//                 this.canvas.removeChild(wire);
//                 this.canvas.removeChild(wire.label);
//             });
//             this.elements = [];
//             this.wireManager.wires = [];

//             // –°–±—Ä–∞—Å—ã–≤–∞–µ–º —Å—á—ë—Ç—á–∏–∫–∏
//             this.routerCounter = 0;
//             this.workstationCounter = 0;

//             // –°–æ–∑–¥–∞–µ–º 24 —Ä–æ—É—Ç–µ—Ä–∞ –∏ —Å–æ—Ö—Ä–∞–Ω—è–µ–º –∏—Ö –≤ –º–∞—Å—Å–∏–≤
//             const routers = [];
//             const regionWidth = 450;
//             const routerSpacingX = 250;
//             const routerSpacingY = 300;
//             const regionHeight = 300;
//             const regionY1 = 20;
//             const regionY2 = regionHeight;

//             // –ú–∞—Å—Å–∏–≤ –¥–ª—è —Ö—Ä–∞–Ω–µ–Ω–∏—è –≤—Å–µ—Ö —Å–≤—è–∑–µ–π —Ä–æ—É—Ç–µ—Ä–æ–≤
//             const routerConnections = Array(24).fill().map(() => []);

//             // –°–æ–∑–¥–∞–µ–º —Ä–æ—É—Ç–µ—Ä—ã –¥–ª—è –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞ (–ø–µ—Ä–≤—ã–µ 12 —Ä–æ—É—Ç–µ—Ä–æ–≤)
//             for (let i = 0; i < 12; i++) {
//                 const x = (i % 6) * routerSpacingX;
//                 const y = Math.floor(i / 6) * routerSpacingY + regionY1;
//                 const router = this.createElement('router', x, y);
//                 routers.push(router);

//                 // –°–æ–∑–¥–∞–µ–º —Ä–∞–±–æ—á—É—é —Å—Ç–∞–Ω—Ü–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞
//                 const workstationX = x + 80;
//                 const workstationY = y + 60 + Math.floor(Math.random() * 150) + 1;
//                 const workstation = this.createElement('workstation', workstationX, workstationY);

//                 // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–≤–æ–¥, —Å–æ–µ–¥–∏–Ω—è—é—â–∏–π —Ä–æ—É—Ç–µ—Ä —Å —Ä–∞–±–æ—á–µ–π —Å—Ç–∞–Ω—Ü–∏–µ–π
//                 this.wireManager.createWire(
//                     router, 
//                     workstation, 
//                     'default', 
//                     Math.random() < 0.5 ? 'duplex' : 'halfduplex', 
//                     this.getRandomWeight()
//                 );
//             }

//             // –°–æ–∑–¥–∞–µ–º —Ä–æ—É—Ç–µ—Ä—ã –¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞ (—Å–ª–µ–¥—É—é—â–∏–µ 12 —Ä–æ—É—Ç–µ—Ä–æ–≤)
//             for (let i = 12; i < 24; i++) {
//                 const x = (i % 6) * routerSpacingX;
//                 const y = Math.floor(i / 6) * routerSpacingY + regionY2 - 50;
//                 const router = this.createElement('router', x, y);
//                 routers.push(router);

//                 // –°–æ–∑–¥–∞–µ–º —Ä–∞–±–æ—á—É—é —Å—Ç–∞–Ω—Ü–∏—é –¥–ª—è –∫–∞–∂–¥–æ–≥–æ —Ä–æ—É—Ç–µ—Ä–∞
//                 const workstationX = x + 80;
//                 const workstationY = y + 80 + Math.floor(Math.random() * 100) + 1;
//                 const workstation = this.createElement('workstation', workstationX, workstationY);

//                 // –°–æ–∑–¥–∞–µ–º –ø—Ä–æ–≤–æ–¥, —Å–æ–µ–¥–∏–Ω—è—é—â–∏–π —Ä–æ—É—Ç–µ—Ä —Å —Ä–∞–±–æ—á–µ–π —Å—Ç–∞–Ω—Ü–∏–µ–π
//                 this.wireManager.createWire(
//                     router, 
//                     workstation, 
//                     'default', 
//                     Math.random() < 0.5 ? 'duplex' : 'halfduplex', 
//                     this.getRandomWeight()
//                 );
//             }

//             // –°–æ–∑–¥–∞–µ–º —Å–ø—É—Ç–Ω–∏–∫–æ–≤—ã–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –º–µ–∂–¥—É –¥–≤—É–º—è —Ä–µ–≥–∏–æ–Ω–∞–º–∏
//             // –°–ª—É—á–∞–π–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞
//             const randomRouter1 = routers[Math.floor(Math.random() * 12)];
//             // –°–ª—É—á–∞–π–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –∏–∑ –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞
//             const randomRouter2 = routers[12 + Math.floor(Math.random() * 12)];

//             // –°–æ–∑–¥–∞–µ–º –ø–µ—Ä–≤–æ–µ —Å–ø—É—Ç–Ω–∏–∫–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
//             this.wireManager.createWire(randomRouter1, randomRouter2, 'satellite', 'duplex', 27);

//             // –°–ª—É—á–∞–π–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –∏–∑ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞ (–¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
//             const randomRouter3 = routers[Math.floor(Math.random() * 12)];
//             // –°–ª—É—á–∞–π–Ω—ã–π —Ä–æ—É—Ç–µ—Ä –∏–∑ –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞ (–¥–ª—è –≤—Ç–æ—Ä–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è)
//             const randomRouter4 = routers[12 + Math.floor(Math.random() * 12)];

//             // –°–æ–∑–¥–∞–µ–º –≤—Ç–æ—Ä–æ–µ —Å–ø—É—Ç–Ω–∏–∫–æ–≤–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
//             this.wireManager.createWire(randomRouter3, randomRouter4, 'satellite', 'duplex', 25);

//             // –°–≤—è–∑—ã–≤–∞–µ–º —Ä–æ—É—Ç–µ—Ä—ã –≤–Ω—É—Ç—Ä–∏ –∫–∞–∂–¥–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞ (—Å –º–∞–∫—Å–∏–º–∞–ª—å–Ω—ã–º–∏ 3 —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è–º–∏)
//             const createConnections = (regionStart, regionEnd) => {
//             for (let i = regionStart; i < regionEnd; i++) {
//                 let connections = routerConnections[i];

//                 // –û–≥—Ä–∞–Ω–∏—á–∏–≤–∞–µ–º —Ü–∏–∫–ª –¥–ª—è –∏–∑–±–µ–∂–∞–Ω–∏—è –∑–∞–≤–∏—Å–∞–Ω–∏—è
//                 let attempts = 0;
//                 const maxAttempts = 100; // –ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ —á–∏—Å–ª–æ –ø–æ–ø—ã—Ç–æ–∫ –¥–ª—è –ø–æ–∏—Å–∫–∞ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–π

//                 while (connections.length < 3 && attempts < maxAttempts) {
//                     const targetIndex = Math.floor(Math.random() * (regionEnd - regionStart)) + regionStart;

//                     if (
//                         targetIndex !== i && 
//                         !connections.includes(targetIndex) && 
//                         routerConnections[targetIndex].length < 3
//                     ) {
//                         // –°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –º–µ–∂–¥—É —Ä–æ—É—Ç–µ—Ä–∞–º–∏
//                         this.wireManager.createWire(
//                             routers[i], 
//                             routers[targetIndex], 
//                             'default', 
//                             Math.random() < 0.5 ? 'duplex' : 'halfduplex', 
//                             this.getRandomWeight()
//                         );
//                         connections.push(targetIndex);
//                         routerConnections[targetIndex].push(i);
//                     }

//                     attempts++;
//                 }

//                 // –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –ø–æ—Å–ª–µ–¥–Ω–∏–µ –¥–≤–∞ –±–ª–æ–∫–∞ –æ—Ç–¥–µ–ª—å–Ω–æ
//                 if (i >= regionEnd - 2 && connections.length < 3) {
//                     while (connections.length < 3) {
//                         const targetIndex = (connections.length === 2) ? regionStart : Math.floor(Math.random() * (regionEnd - regionStart)) + regionStart;

//                         if (
//                             targetIndex !== i && 
//                             !connections.includes(targetIndex)
//                         ) {
//                             // –°–æ–∑–¥–∞–µ–º –ø—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ–µ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
//                             this.wireManager.createWire(
//                                 routers[i], 
//                                 routers[targetIndex], 
//                                 'default', 
//                                 Math.random() < 0.5 ? 'duplex' : 'halfduplex', 
//                                 this.getRandomWeight()
//                             );
//                             connections.push(targetIndex);
//                             if (!routerConnections[targetIndex].includes(i)) {
//                                 routerConnections[targetIndex].push(i);
//                             }
//                         }
//                     }
//                 }
//             }
//         };


//             // –°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –ø–µ—Ä–≤–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞ (–ø–µ—Ä–≤—ã–π —Ä–µ–≥–∏–æ–Ω)
//             createConnections(0, 12);

//             // –°–æ–∑–¥–∞–µ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è –≤–Ω—É—Ç—Ä–∏ –≤—Ç–æ—Ä–æ–≥–æ —Ä–µ–≥–∏–æ–Ω–∞ (–≤—Ç–æ—Ä–æ–π —Ä–µ–≥–∏–æ–Ω)
//             createConnections(12, 24);
//         }

//         transferDataMenuOpen() {
//             this.sideMenu.openTransferDataMenu();
//         }
//     }

//     document.addEventListener('DOMContentLoaded', () => {
//         const canvas = document.getElementById('canvas');
//         const canvasContainer = document.getElementById('canvas-container');
//         const addRouterButton = document.getElementById('add-router');
//         const addWorkstationButton = document.getElementById('add-workstation');
//         const addWireButton = document.getElementById('add-wire');
//         const removeWireButton = document.getElementById('remove-wire');
//         const removeObjectButton = document.getElementById('remove-object');
//         const uploadButtonContainer = document.getElementById('upload-config');
//         const downloadButton = document.getElementById('download-config');
//         const transferButton = document.getElementById('transfer-data');
//         const app = new NetworkApp(canvas, canvasContainer);

//         addRouterButton.addEventListener('click', () => app.createElement('router'));
//         addWorkstationButton.addEventListener('click', () => app.createElement('workstation'));
//         addWireButton.addEventListener('click', () => app.createWireMode(addWireButton));
//         removeWireButton.addEventListener('click', () => app.createRemoveWireMode(removeWireButton));
//         removeObjectButton.addEventListener('click', () => app.createRemoveObjectMode(removeObjectButton));
//         downloadButton.addEventListener('click', () => app.downloadConfig());
//         transferButton.addEventListener('click', () => app.transferDataMenuOpen());
//         document.getElementById('randomize').addEventListener('click', () => app.createRandomizedNetwork());

//         const uploadButton = document.createElement('input');
//         uploadButton.type = 'file';
//         uploadButton.classList.add('hidden');
//         uploadButton.accept = '.json';
//         uploadButton.addEventListener('change', (event) => app.loadConfig(event));

//         const uploadButtonLabel = document.createElement('button');
//         uploadButtonLabel.innerText = 'Upload Configuration';
//         uploadButtonLabel.classList.add('px-4', 'py-2', 'bg-green-500', 'text-white', 'rounded', 'shadow');
//         uploadButtonLabel.addEventListener('click', () => uploadButton.click());

//         uploadButtonContainer.appendChild(uploadButtonLabel);
//         uploadButtonContainer.appendChild(uploadButton);

//                 // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è –ø–æ—è–≤–ª–µ–Ω–∏—è –∫–Ω–æ–ø–∫–∏
//         function observeButtonCreation(app) {
//             // –°–æ–∑–¥–∞—ë–º —ç–∫–∑–µ–º–ø–ª—è—Ä MutationObserver
//             const observer = new MutationObserver((mutationsList, observer) => {
//                 // –î–ª—è –∫–∞–∂–¥–æ–π –º—É—Ç–∞—Ü–∏–∏ (–∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ DOM)
//                 mutationsList.forEach((mutation) => {
//                     // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –¥–æ–±–∞–≤–ª–µ–Ω –ª–∏ —ç–ª–µ–º–µ–Ω—Ç —Å id "send-data-between"
//                     if (mutation.type === 'childList') {
//                         const button = document.getElementById('send-data-between');
//                         if (button) {
//                             // –ï—Å–ª–∏ –∫–Ω–æ–ø–∫–∞ –ø–æ—è–≤–∏–ª–∞—Å—å, –¥–æ–±–∞–≤–ª—è–µ–º –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–±—ã—Ç–∏—è
//                             button.addEventListener('click', () => handleSendData(app));
//                             // –ü—Ä–µ–∫—Ä–∞—â–∞–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ, –µ—Å–ª–∏ –∫–Ω–æ–ø–∫—É —É–∂–µ –Ω–∞—à–ª–∏
//                             observer.disconnect();
//                         }
//                     }
//                 });
//             });

//             // –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –¥–ª—è –æ—Ç—Å–ª–µ–∂–∏–≤–∞–Ω–∏—è
//             const config = { childList: true, subtree: true };

//             // –ù–∞–±–ª—é–¥–∞–µ–º –∑–∞ body (–∏–ª–∏ –¥—Ä—É–≥–∏–º —ç–ª–µ–º–µ–Ω—Ç–æ–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞)
//             observer.observe(document.body, config);
//         }

//         // –ó–∞–ø—É—Å–∫–∞–µ–º –Ω–∞–±–ª—é–¥–µ–Ω–∏–µ –∑–∞ —Å–æ–∑–¥–∞–Ω–∏–µ–º –∫–Ω–æ–ø–∫–∏
//         observeButtonCreation(app);

//         // –§—É–Ω–∫—Ü–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –Ω–∞–∂–∞—Ç–∏—è –∫–Ω–æ–ø–∫–∏
//         function handleSendData(app) {
//             const fromWorkstationId = document.querySelector('#from-workstation-select').value;
//             const toWorkstationId = document.querySelector('#to-workstation-select').value;
//             const dataSize = document.querySelector('#data-size').value;

//             // –ü—Ä–∏–º–µ—Ä —Å–æ–∑–¥–∞–Ω–∏—è —ç–∫–∑–µ–º–ø–ª—è—Ä–∞ –∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –ø–∞–∫–µ—Ç–∞
//             const packetTransfer = new PacketTransfer(app.getNetworkConfig());
//             packetTransfer.transferDataWithProtocols(fromWorkstationId, toWorkstationId, dataSize);

//             // –õ–æ–≥–∏–∫–∞ –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö (–Ω–∞–ø—Ä–∏–º–µ—Ä, –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Å–∏–º—É–ª—è—Ü–∏—è –ø–µ—Ä–µ–¥–∞—á–∏)
//             if (!fromWorkstationId || !toWorkstationId) {
//                 alert('Please select both workstations.');
//                 return;
//             }

//             // –ü—Ä–∏–º–µ—Ä –æ–±—Ä–∞–±–æ—Ç–∫–∏ –æ—Ç–ø—Ä–∞–≤–∫–∏ –¥–∞–Ω–Ω—ã—Ö
//             console.log(`Sending data from ${fromWorkstationId} to ${toWorkstationId} with size ${dataSize} MTU.`);
//         }

//     });
// </script>






    
</body>
</html>

